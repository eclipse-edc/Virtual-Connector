<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="461px" height="381px" viewBox="-0.5 -0.5 461 381" style="background: transparent; background-color: transparent;" content="&lt;mxfile host=&quot;65bd71144e&quot;&gt;&lt;diagram id=&quot;scenario2-multi-node-skip-locked&quot; name=&quot;Page-1&quot;&gt;&lt;mxGraphModel&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#666666"/>
        </marker>
    </defs>
    <g>
        <!-- Control Plane 1 -->
        <rect x="0" y="0" width="180" height="90" fill="#f5f5f5" stroke="#666666" stroke-width="1.5"/>
        <text x="90" y="18" font-family="Helvetica, Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#333333">Control Plane 1</text>
        <rect x="10" y="28" width="160" height="55" rx="6" ry="6" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
        <text x="90" y="46" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">State Machines</text>
        <text x="90" y="59" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskStateListeners</text>
        <text x="90" y="72" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskService</text>

        <!-- Control Plane N -->
        <rect x="0" y="105" width="180" height="90" fill="#f5f5f5" stroke="#666666" stroke-width="1.5"/>
        <text x="90" y="123" font-family="Helvetica, Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#333333">Control Plane N</text>
        <rect x="10" y="133" width="160" height="55" rx="6" ry="6" fill="#dae8fc" stroke="#6c8ebf" stroke-width="1.5"/>
        <text x="90" y="151" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">State Machines</text>
        <text x="90" y="164" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskStateListeners</text>
        <text x="90" y="177" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskService</text>

        <!-- Arrows from Control Planes -->
        <path d="M 180 55 L 200 55 L 200 35 L 220 35" stroke="#666666" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 180 160 L 200 160 L 200 35 L 220 35" stroke="#666666" stroke-width="1.5" fill="none"/>

        <!-- TaskPollExecutor 1 -->
        <rect x="220" y="0" width="150" height="65" rx="6" ry="6" fill="#e1d5e7" stroke="#9673a6" stroke-width="1.5"/>
        <text x="295" y="18" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskPollExecutor 1</text>
        <text x="295" y="33" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Poll every x ms)</text>
        <text x="295" y="48" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(SKIP LOCKED)</text>

        <!-- Arrows from TaskPollExecutor 1 to workers -->
        <path d="M 260 65 L 260 80" stroke="#666666" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 295 65 L 295 75 L 355 75 L 355 80" stroke="#666666" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>

        <!-- Worker 2 -->
        <rect x="220" y="80" width="90" height="50" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" stroke-width="1.5"/>
        <text x="265" y="100" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskPoll 2</text>
        <text x="265" y="115" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Worker)</text>

        <!-- Worker 3 -->
        <rect x="320" y="80" width="90" height="50" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" stroke-width="1.5"/>
        <text x="365" y="100" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskPoll 3</text>
        <text x="365" y="115" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Worker)</text>

        <!-- Worker N -->
        <rect x="220" y="145" width="90" height="50" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" stroke-width="1.5"/>
        <text x="265" y="165" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskPoll N</text>
        <text x="265" y="180" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Worker)</text>

        <!-- Worker M -->
        <rect x="320" y="145" width="90" height="50" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" stroke-width="1.5"/>
        <text x="365" y="165" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">TaskPoll M</text>
        <text x="365" y="180" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Worker)</text>

        <!-- Arrows from workers to PostgreSQL -->
        <path d="M 265 130 L 265 210 L 230 210 L 230 250" stroke="#666666" stroke-width="1.5" fill="none" marker-end="url(#arrowhead)"/>
        <path d="M 365 130 L 365 210 L 230 210" stroke="#666666" stroke-width="1.5" fill="none"/>
        <path d="M 265 195 L 265 210" stroke="#666666" stroke-width="1.5" fill="none"/>
        <path d="M 365 195 L 365 210" stroke="#666666" stroke-width="1.5" fill="none"/>

        <!-- PostgreSQL cylinder -->
        <path d="M 130 270 Q 130 250 230 250 Q 330 250 330 270 L 330 350 Q 330 370 230 370 Q 130 370 130 350 Z" fill="#fff2cc" stroke="#d6b656" stroke-width="1.5"/>
        <ellipse cx="230" cy="270" rx="100" ry="20" fill="#fff2cc" stroke="#d6b656" stroke-width="1.5"/>
        <text x="230" y="300" font-family="Helvetica, Arial, sans-serif" font-size="10" text-anchor="middle" fill="#000000">PostgreSQL (Shared)</text>
        <text x="230" y="315" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(edc_tasks)</text>
        <text x="230" y="330" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(WITH SKIP LOCKED)</text>
        <text x="230" y="345" font-family="Helvetica, Arial, sans-serif" font-size="9" text-anchor="middle" fill="#000000">(Persistent)</text>
    </g>
</svg>
